---
import Layout from '../../layouts/Layout.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';
import { getAllTrucks, getSpecValue } from '../../data/trucksData';

export async function getStaticPaths() {
  const trucks = getAllTrucks();
  return trucks.map((truck) => ({
    params: { id: truck.id.toString() },
    props: { truck },
  }));
}

const { truck } = Astro.props;

// const formatPrice = (price: number) => {
//   return new Intl.NumberFormat('vi-VN').format(price);
// };

const formatMileage = (mileage: number) => {
  return new Intl.NumberFormat('vi-VN').format(mileage);
};
---
  <!-- title={`${truck.title} - ${formatPrice(truck.price)}ƒë | TruckSales`} -->
<Layout 
  title={`${truck.name} | TruckSales`}
  description={`${truck.name} - ${getSpecValue(truck.basic_specification, 'T·∫£i tr·ªçng')} t·∫£i tr·ªçng. B·∫£o h√†nh ƒë·∫ßy ƒë·ªß, giao xe t·∫≠n n∆°i.`}
  image={truck.image}
  canonical={`/trucks/${truck.id}`}
>
  <Header />
  <main>
    <!-- Breadcrumb -->
    <section class="bg-gray-50 py-4">
      <div class="container mx-auto px-4">
        <nav class="text-sm">
          <ol class="flex items-center space-x-2">
            <li><a href="/" class="text-primary-600 hover:text-primary-700">Trang ch·ªß</a></li>
            <li class="text-gray-400">/</li>
            <li><a href="/trucks" class="text-primary-600 hover:text-primary-700">Xe t·∫£i</a></li>
            <li class="text-gray-400">/</li>
            <li class="text-gray-600">{truck.name}</li>
          </ol>
        </nav>
      </div>
    </section>
    
    <!-- Truck Details -->
    <section class="py-12">
      <div class="container mx-auto px-4">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
          <!-- Images -->
          <div class="lg:col-span-2">
            <div class="space-y-4">
              <!-- Main Image -->
              <div class="relative">
                <img 
                  src={truck.image} 
                  alt={truck.name}
                  class="w-full h-96 object-cover rounded-lg shadow-lg"
                  id="main-image"
                />
                <div class="absolute top-4 left-4 bg-primary-600 text-white px-3 py-1 rounded-full text-sm font-semibold">
                  {truck.brand}
                </div>
              </div>
              
              <!-- Thumbnail Images -->
              {truck.image && (
                <div class="grid grid-cols-4 gap-2">
                  <img 
                    src={truck.image} 
                    alt={`${truck.name} - H√¨nh 1`}
                    class="w-full h-20 object-cover rounded-lg cursor-pointer hover:opacity-75 transition-opacity"
                    onclick={`document.getElementById('main-image').src = '${truck.image}'`}
                  />
                </div>
              )}
            </div>
          </div>
          
          <!-- Details -->
          <div class="lg:col-span-1">
            <div class="bg-white p-6 rounded-lg shadow-lg sticky top-4">
              <h1 class="text-2xl font-bold text-gray-900 mb-4">
                {truck.name}
              </h1>
              
                  <div class="bg-primary-50 p-4 rounded-lg mb-6">
                    <h3 class="font-semibold text-primary-900 mb-2">Li√™n h·ªá b√°o gi√°</h3>
                    <p class="text-primary-700 text-sm">
                      Vui l√≤ng li√™n h·ªá ƒë·ªÉ nh·∫≠n b√°o gi√° chi ti·∫øt v√† ∆∞u ƒë√£i t·ªët nh·∫•t
                    </p>
                  </div>
              
              <!-- Key Specs -->
              <div class="space-y-3 mb-6">
                {truck.basic_specification && Array.isArray(truck.basic_specification) && truck.basic_specification.map(spec => (
                  <div class="flex justify-between">
                    <span class="text-gray-600">{spec.title}:</span>
                    <span class="font-medium">{spec.value}</span>
                  </div>
                ))}
              </div>
              
              <!-- Contact Buttons -->
              <div class="space-y-4">
                <div class="bg-primary-50 p-4 rounded-lg">
                  <h3 class="font-semibold text-primary-900 mb-2">H·ªó tr·ª£ b√°n h√†ng 24/7</h3>
                  <p class="text-primary-700 text-sm mb-3">ƒê·ªôi ng≈© t∆∞ v·∫•n chuy√™n nghi·ªáp s·∫µn s√†ng h·ªó tr·ª£ b·∫°n</p>
                  <a 
                    href={`tel:0900123456`}
                    class="w-full bg-primary-600 text-white px-6 py-3 rounded-lg hover:bg-primary-700 transition-colors font-semibold text-center block"
                  >
                    üìû Hotline: 0936777735
                  </a>
                </div>
                
                <div class="space-y-3">
                  <a 
                    href="/contact"
                    class="w-full border-2 border-primary-600 text-primary-600 px-6 py-3 rounded-lg hover:bg-primary-600 hover:text-white transition-colors font-semibold text-center block"
                  >
                    üí¨ T∆∞ v·∫•n tr·ª±c tuy·∫øn
                  </a>
                  <a 
                    href="/contact"
                    class="w-full bg-gray-100 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-200 transition-colors font-semibold text-center block"
                  >
                    üìã Y√™u c·∫ßu b√°o gi√°
                  </a>
                </div>
                
                <div class="bg-green-50 p-4 rounded-lg">
                  <h3 class="font-semibold text-green-900 mb-2">Cam k·∫øt ch·∫•t l∆∞·ª£ng</h3>
                  <ul class="text-green-700 text-sm space-y-1">
                    <li>‚úì B·∫£o h√†nh ch√≠nh h√£ng</li>
                    <li>‚úì Giao xe t·∫≠n n∆°i</li>
                    <li>‚úì H·ªó tr·ª£ tr·∫£ g√≥p</li>
                    <li>‚úì D·ªãch v·ª• sau b√°n h√†ng</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Detailed Information -->
        <div class="mt-12">
          <!-- Overview -->
          <div class="bg-white p-8 rounded-lg shadow-lg mb-8">
            <h2 class="text-2xl font-bold text-gray-900 mb-6">T·ªïng quan s·∫£n ph·∫©m</h2>
            <div class="prose max-w-none">
              <p class="text-lg text-gray-700 leading-relaxed mb-6">
                <strong>{truck.name}</strong> l√† d√≤ng xe t·∫£i th∆∞∆°ng m·∫°i ch·∫•t l∆∞·ª£ng cao t·ª´ th∆∞∆°ng hi·ªáu {truck.brand}. 
                V·ªõi thi·∫øt k·∫ø hi·ªán ƒë·∫°i v√† c√¥ng ngh·ªá ti√™n ti·∫øn, {truck.name} mang ƒë·∫øn hi·ªáu su·∫•t v·∫≠n h√†nh t·ªëi ∆∞u 
                v√† ƒë·ªô tin c·∫≠y cao cho c√°c ho·∫°t ƒë·ªông v·∫≠n t·∫£i h√†ng h√≥a.
              </p>
              
              <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <div class="bg-blue-50 p-4 rounded-lg">
                  <h3 class="font-semibold text-blue-900 mb-2">T·∫£i tr·ªçng</h3>
                  <p class="text-blue-700">{getSpecValue(truck.basic_specification, 'T·∫£i tr·ªçng')}</p>
                </div>
                <div class="bg-green-50 p-4 rounded-lg">
                  <h3 class="font-semibold text-green-900 mb-2">Chi·ªÅu d√†i th√πng</h3>
                  <p class="text-green-700">{getSpecValue(truck.basic_specification, 'Chi·ªÅu d√†i th√πng')}</p>
                </div>
                <div class="bg-orange-50 p-4 rounded-lg">
                  <h3 class="font-semibold text-orange-900 mb-2">D·ªãch v·ª• 24/7</h3>
                  <p class="text-orange-700">{getSpecValue(truck.basic_specification, 'D·ªãch v·ª• 24/7')}</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Technical Specifications -->
          <div class="bg-white p-8 rounded-lg shadow-lg mb-8">
            <h2 class="text-2xl font-bold text-gray-900 mb-6">Th√¥ng s·ªë k·ªπ thu·∫≠t chi ti·∫øt</h2>
            <div class="overflow-x-auto">
              <table class="w-full border-collapse border border-gray-300">
                <thead>
                  <tr class="bg-gray-50">
                    <th class="border border-gray-300 px-4 py-3 text-left font-semibold text-gray-900">Th√¥ng s·ªë</th>
                    <th class="border border-gray-300 px-4 py-3 text-left font-semibold text-gray-900">Gi√° tr·ªã</th>
                  </tr>
                </thead>
                <tbody>
                  {truck.basic_specification && Array.isArray(truck.basic_specification) && truck.basic_specification.map((spec, index) => (
                    <tr class={index % 2 === 0 ? 'bg-white' : 'bg-gray-50'}>
                      <td class="border border-gray-300 px-4 py-3 font-medium text-gray-700">{spec.title}</td>
                      <td class="border border-gray-300 px-4 py-3 text-gray-600">{spec.value}</td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
          </div>

          <!-- Features and Benefits -->
          <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- Key Features -->
            <div class="bg-white p-8 rounded-lg shadow-lg">
              <h2 class="text-2xl font-bold text-gray-900 mb-6">T√≠nh nƒÉng n·ªïi b·∫≠t</h2>
              <ul class="space-y-4">
                <li class="flex items-start">
                  <svg class="w-6 h-6 text-green-500 mr-3 mt-1 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                  </svg>
                  <div>
                    <h3 class="font-semibold text-gray-900">Thi·∫øt k·∫ø hi·ªán ƒë·∫°i</h3>
                    <p class="text-gray-600 text-sm">Ki·ªÉu d√°ng sang tr·ªçng, ph√π h·ª£p v·ªõi xu h∆∞·ªõng th·ªùi ƒë·∫°i</p>
                  </div>
                </li>
                <li class="flex items-start">
                  <svg class="w-6 h-6 text-green-500 mr-3 mt-1 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                  </svg>
                  <div>
                    <h3 class="font-semibold text-gray-900">Ti·∫øt ki·ªám nhi√™n li·ªáu</h3>
                    <p class="text-gray-600 text-sm">C√¥ng ngh·ªá ƒë·ªông c∆° ti√™n ti·∫øn gi√∫p gi·∫£m chi ph√≠ v·∫≠n h√†nh</p>
                  </div>
                </li>
                <li class="flex items-start">
                  <svg class="w-6 h-6 text-green-500 mr-3 mt-1 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                  </svg>
                  <div>
                    <h3 class="font-semibold text-gray-900">An to√†n cao</h3>
                    <p class="text-gray-600 text-sm">H·ªá th·ªëng an to√†n ti√™n ti·∫øn, b·∫£o v·ªá t·ªëi ƒëa cho ng∆∞·ªùi l√°i</p>
                  </div>
                </li>
                <li class="flex items-start">
                  <svg class="w-6 h-6 text-green-500 mr-3 mt-1 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                  </svg>
                  <div>
                    <h3 class="font-semibold text-gray-900">B·∫£o h√†nh to√†n di·ªán</h3>
                    <p class="text-gray-600 text-sm">Ch·∫ø ƒë·ªô b·∫£o h√†nh d√†i h·∫°n, h·ªó tr·ª£ k·ªπ thu·∫≠t 24/7</p>
                  </div>
                </li>
              </ul>
            </div>

            <!-- Why Choose This Truck -->
            <div class="bg-white p-8 rounded-lg shadow-lg">
              <h2 class="text-2xl font-bold text-gray-900 mb-6">T·∫°i sao ch·ªçn {truck.name}?</h2>
              <div class="space-y-4">
                <div class="border-l-4 border-primary-600 pl-4">
                  <h3 class="font-semibold text-gray-900">Hi·ªáu su·∫•t v∆∞·ª£t tr·ªôi</h3>
                  <p class="text-gray-600 text-sm">ƒê·ªông c∆° m·∫°nh m·∫Ω, ti·∫øt ki·ªám nhi√™n li·ªáu, ph√π h·ª£p v·ªõi m·ªçi ƒë·ªãa h√¨nh</p>
                </div>
                <div class="border-l-4 border-primary-600 pl-4">
                  <h3 class="font-semibold text-gray-900">ƒê·ªô tin c·∫≠y cao</h3>
                  <p class="text-gray-600 text-sm">ƒê∆∞·ª£c s·∫£n xu·∫•t theo ti√™u chu·∫©n qu·ªëc t·∫ø, ƒë·∫£m b·∫£o ch·∫•t l∆∞·ª£ng</p>
                </div>
                <div class="border-l-4 border-primary-600 pl-4">
                  <h3 class="font-semibold text-gray-900">Gi√° tr·ªã ƒë·∫ßu t∆∞</h3>
                  <p class="text-gray-600 text-sm">Chi ph√≠ v·∫≠n h√†nh th·∫•p, gi√° tr·ªã b√°n l·∫°i cao</p>
                </div>
                <div class="border-l-4 border-primary-600 pl-4">
                  <h3 class="font-semibold text-gray-900">H·ªó tr·ª£ to√†n di·ªán</h3>
                  <p class="text-gray-600 text-sm">M·∫°ng l∆∞·ªõi d·ªãch v·ª• r·ªông kh·∫Øp, ph·ª• t√πng ch√≠nh h√£ng</p>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Service and Support -->
        <div class="mt-12">
          <div class="bg-gradient-to-r from-primary-600 to-primary-700 text-white p-8 rounded-lg mb-8">
            <h2 class="text-2xl font-bold mb-4">D·ªãch v·ª• & H·ªó tr·ª£</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
              <div class="text-center">
                <div class="bg-white bg-opacity-20 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-3">
                  <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                  </svg>
                </div>
                <h3 class="font-semibold mb-2">B·∫£o h√†nh to√†n di·ªán</h3>
                <p class="text-sm opacity-90">B·∫£o h√†nh ch√≠nh h√£ng, h·ªó tr·ª£ k·ªπ thu·∫≠t 24/7</p>
              </div>
              <div class="text-center">
                <div class="bg-white bg-opacity-20 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-3">
                  <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd"/>
                  </svg>
                </div>
                <h3 class="font-semibold mb-2">Giao xe t·∫≠n n∆°i</h3>
                <p class="text-sm opacity-90">Mi·ªÖn ph√≠ giao xe trong khu v·ª±c, ki·ªÉm tra k·ªπ l∆∞·ª°ng</p>
              </div>
              <div class="text-center">
                <div class="bg-white bg-opacity-20 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-3">
                  <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M4 4a2 2 0 00-2 2v4a2 2 0 002 2V6h10a2 2 0 00-2-2H4zm2 6a2 2 0 012-2h8a2 2 0 012 2v4a2 2 0 01-2 2H8a2 2 0 01-2-2v-4zm6 4a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd"/>
                  </svg>
                </div>
                <h3 class="font-semibold mb-2">H·ªó tr·ª£ tr·∫£ g√≥p</h3>
                <p class="text-sm opacity-90">L√£i su·∫•t ∆∞u ƒë√£i, th·ªß t·ª•c ƒë∆°n gi·∫£n, nhanh ch√≥ng</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Related Trucks -->
        <div class="mt-12">
          <h2 class="text-2xl font-bold text-gray-900 mb-6">Xe t·∫£i li√™n quan</h2>
          <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            {getAllTrucks().filter(t => t.id !== truck.id && t.brand === truck.brand).slice(0, 3).map(relatedTruck => (
              <div class="bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition-shadow">
                <img 
                  src={relatedTruck.image} 
                  alt={relatedTruck.name}
                  class="w-full h-48 object-cover"
                />
                <div class="p-4">
                  <h3 class="font-semibold text-gray-900 mb-2">{relatedTruck.name}</h3>
                      <div class="text-sm text-gray-500 mb-2">
                        Li√™n h·ªá b√°o gi√°
                      </div>
                  <a 
                    href={`/trucks/${relatedTruck.id}`}
                    class="text-primary-600 hover:text-primary-700 font-medium"
                  >
                    Xem chi ti·∫øt ‚Üí
                  </a>
                </div>
              </div>
            ))}
          </div>
        </div>
      </div>
    </section>
  </main>
  <Footer />
</Layout>

<!-- Structured Data for SEO -->
<script type="application/ld+json" set:html={JSON.stringify({
  "@context": "https://schema.org",
  "@type": "Car",
  "name": truck.name,
  "description": truck.name + " - " + getSpecValue(truck.basic_specification, 'T·∫£i tr·ªçng'),
  "brand": {
    "@type": "Brand",
    "name": truck.brand
  },
  "model": truck.name,
  "offers": {
    "@type": "Offer",
    // "price": truck.price,
    // "priceCurrency": "VND",
    "availability": "https://schema.org/InStock",
    "seller": {
      "@type": "Organization",
      "name": "TruckSales"
    }
  },
  "image": truck.image
})} />
